

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>database_manager &mdash; PyQt5 School Management System 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PyQt5 School Management System
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">documented proj</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyQt5 School Management System</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">database_manager</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for database_manager</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Database Management Module</span>

<span class="sd">This module provides database functionality for the school management system using SQLite.</span>
<span class="sd">It handles all database operations including CRUD operations, search functionality, </span>
<span class="sd">backup/restore capabilities, and data synchronization with the core system objects.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">school_management</span><span class="w"> </span><span class="kn">import</span> <span class="n">Student</span><span class="p">,</span> <span class="n">Instructor</span><span class="p">,</span> <span class="n">Course</span><span class="p">,</span> <span class="n">SchoolManagementSystem</span>


<div class="viewcode-block" id="DatabaseManager">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DatabaseManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Database manager class for the school management system.</span>
<span class="sd">    </span>
<span class="sd">    Provides comprehensive database operations for managing students, instructors,</span>
<span class="sd">    courses, and their relationships using SQLite. Includes features like automatic</span>
<span class="sd">    timestamping, data integrity constraints, and backup functionality.</span>
<span class="sd">    </span>
<span class="sd">    :param db_path: Path to the SQLite database file, defaults to &quot;school_management.db&quot;</span>
<span class="sd">    :type db_path: str, optional</span>
<span class="sd">    </span>
<span class="sd">    :ivar db_path: Path to the database file</span>
<span class="sd">    :vartype db_path: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;school_management.db&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_path</span> <span class="o">=</span> <span class="n">db_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_database</span><span class="p">()</span>
    
<div class="viewcode-block" id="DatabaseManager.init_database">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.init_database">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">init_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the database with all required tables and triggers.</span>
<span class="sd">        </span>
<span class="sd">        Creates the complete database schema including:</span>
<span class="sd">        - Students table with validation constraints</span>
<span class="sd">        - Instructors table with validation constraints</span>
<span class="sd">        - Courses table with foreign key relationships</span>
<span class="sd">        - Student-course registration junction table</span>
<span class="sd">        - Automatic timestamp update triggers</span>
<span class="sd">        </span>
<span class="sd">        All tables include created_at and updated_at timestamp fields.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                CREATE TABLE IF NOT EXISTS students (</span>
<span class="s1">                    student_id TEXT PRIMARY KEY,</span>
<span class="s1">                    name TEXT NOT NULL,</span>
<span class="s1">                    age INTEGER NOT NULL CHECK(age &gt;= 0),</span>
<span class="s1">                    email TEXT NOT NULL UNIQUE,</span>
<span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
<span class="s1">                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
<span class="s1">                )</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                CREATE TABLE IF NOT EXISTS instructors (</span>
<span class="s1">                    instructor_id TEXT PRIMARY KEY,</span>
<span class="s1">                    name TEXT NOT NULL,</span>
<span class="s1">                    age INTEGER NOT NULL CHECK(age &gt;= 0),</span>
<span class="s1">                    email TEXT NOT NULL UNIQUE,</span>
<span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
<span class="s1">                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
<span class="s1">                )</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                CREATE TABLE IF NOT EXISTS courses (</span>
<span class="s1">                    course_id TEXT PRIMARY KEY,</span>
<span class="s1">                    course_name TEXT NOT NULL,</span>
<span class="s1">                    instructor_id TEXT,</span>
<span class="s1">                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
<span class="s1">                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
<span class="s1">                    FOREIGN KEY (instructor_id) REFERENCES instructors (instructor_id)</span>
<span class="s1">                        ON DELETE SET NULL ON UPDATE CASCADE</span>
<span class="s1">                )</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                CREATE TABLE IF NOT EXISTS student_course_registrations (</span>
<span class="s1">                    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="s1">                    student_id TEXT NOT NULL,</span>
<span class="s1">                    course_id TEXT NOT NULL,</span>
<span class="s1">                    registration_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span>
<span class="s1">                    FOREIGN KEY (student_id) REFERENCES students (student_id)</span>
<span class="s1">                        ON DELETE CASCADE ON UPDATE CASCADE,</span>
<span class="s1">                    FOREIGN KEY (course_id) REFERENCES courses (course_id)</span>
<span class="s1">                        ON DELETE CASCADE ON UPDATE CASCADE,</span>
<span class="s1">                    UNIQUE(student_id, course_id)</span>
<span class="s1">                )</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                CREATE TRIGGER IF NOT EXISTS update_students_timestamp </span>
<span class="s1">                AFTER UPDATE ON students</span>
<span class="s1">                BEGIN</span>
<span class="s1">                    UPDATE students SET updated_at = CURRENT_TIMESTAMP WHERE student_id = NEW.student_id;</span>
<span class="s1">                END;</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                CREATE TRIGGER IF NOT EXISTS update_instructors_timestamp </span>
<span class="s1">                AFTER UPDATE ON instructors</span>
<span class="s1">                BEGIN</span>
<span class="s1">                    UPDATE instructors SET updated_at = CURRENT_TIMESTAMP WHERE instructor_id = NEW.instructor_id;</span>
<span class="s1">                END;</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                CREATE TRIGGER IF NOT EXISTS update_courses_timestamp </span>
<span class="s1">                AFTER UPDATE ON courses</span>
<span class="s1">                BEGIN</span>
<span class="s1">                    UPDATE courses SET updated_at = CURRENT_TIMESTAMP WHERE course_id = NEW.course_id;</span>
<span class="s1">                END;</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            
            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.add_student">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.add_student">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student</span><span class="p">:</span> <span class="n">Student</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new student to the database.</span>
<span class="sd">        </span>
<span class="sd">        Inserts a student record with all validation constraints applied.</span>
<span class="sd">        Handles duplicate student ID and email address errors gracefully.</span>
<span class="sd">        </span>
<span class="sd">        :param student: The student object to add to the database</span>
<span class="sd">        :type student: Student</span>
<span class="sd">        :return: True if student was added successfully, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                    INSERT INTO students (student_id, name, age, email)</span>
<span class="s1">                    VALUES (?, ?, ?, ?)</span>
<span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">student_id</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">get_email</span><span class="p">()))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error adding student: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error adding student: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.add_instructor">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.add_instructor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructor</span><span class="p">:</span> <span class="n">Instructor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new instructor to the database.</span>
<span class="sd">        </span>
<span class="sd">        Inserts an instructor record with all validation constraints applied.</span>
<span class="sd">        Handles duplicate instructor ID and email address errors gracefully.</span>
<span class="sd">        </span>
<span class="sd">        :param instructor: The instructor object to add to the database</span>
<span class="sd">        :type instructor: Instructor</span>
<span class="sd">        :return: True if instructor was added successfully, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                    INSERT INTO instructors (instructor_id, name, age, email)</span>
<span class="s1">                    VALUES (?, ?, ?, ?)</span>
<span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor</span><span class="o">.</span><span class="n">instructor_id</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">get_email</span><span class="p">()))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error adding instructor: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error adding instructor: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.add_course">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.add_course">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_course</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">course</span><span class="p">:</span> <span class="n">Course</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new course to the database.</span>
<span class="sd">        </span>
<span class="sd">        Inserts a course record with optional instructor assignment.</span>
<span class="sd">        Validates foreign key relationships and handles constraint violations.</span>
<span class="sd">        </span>
<span class="sd">        :param course: The course object to add to the database</span>
<span class="sd">        :type course: Course</span>
<span class="sd">        :return: True if course was added successfully, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">instructor_id</span> <span class="o">=</span> <span class="n">course</span><span class="o">.</span><span class="n">instructor</span><span class="o">.</span><span class="n">instructor_id</span> <span class="k">if</span> <span class="n">course</span><span class="o">.</span><span class="n">instructor</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                    INSERT INTO courses (course_id, course_name, instructor_id)</span>
<span class="s1">                    VALUES (?, ?, ?)</span>
<span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">course</span><span class="o">.</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course</span><span class="o">.</span><span class="n">course_name</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error adding course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error adding course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.register_student_to_course">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.register_student_to_course">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_student_to_course</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">course_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a student for a course in the database.</span>
<span class="sd">        </span>
<span class="sd">        Creates a registration record linking a student to a course.</span>
<span class="sd">        Prevents duplicate registrations and validates foreign key relationships.</span>
<span class="sd">        </span>
<span class="sd">        :param student_id: The ID of the student to register</span>
<span class="sd">        :type student_id: str</span>
<span class="sd">        :param course_id: The ID of the course to register for</span>
<span class="sd">        :type course_id: str</span>
<span class="sd">        :return: True if registration was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                    INSERT INTO student_course_registrations (student_id, course_id)</span>
<span class="s1">                    VALUES (?, ?)</span>
<span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error registering student to course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error registering student to course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.get_all_students">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.get_all_students">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_students</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all students from the database.</span>
<span class="sd">        </span>
<span class="sd">        :return: List of tuples containing (student_id, name, age, email)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT student_id, name, age, email FROM students</span>
<span class="s1">                ORDER BY name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.get_all_instructors">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.get_all_instructors">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_instructors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all instructors from the database.</span>
<span class="sd">        </span>
<span class="sd">        :return: List of tuples containing (instructor_id, name, age, email)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT instructor_id, name, age, email FROM instructors</span>
<span class="s1">                ORDER BY name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.get_all_courses">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.get_all_courses">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all courses with instructor information from the database.</span>
<span class="sd">        </span>
<span class="sd">        :return: List of tuples containing (course_id, course_name, instructor_id, instructor_name)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT c.course_id, c.course_name, i.instructor_id, i.name as instructor_name</span>
<span class="s1">                FROM courses c</span>
<span class="s1">                LEFT JOIN instructors i ON c.instructor_id = i.instructor_id</span>
<span class="s1">                ORDER BY c.course_name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.get_student_courses">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.get_student_courses">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_student_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all courses registered by a specific student.</span>
<span class="sd">        </span>
<span class="sd">        :param student_id: The ID of the student</span>
<span class="sd">        :type student_id: str</span>
<span class="sd">        :return: List of tuples containing (course_id, course_name)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT c.course_id, c.course_name</span>
<span class="s1">                FROM courses c</span>
<span class="s1">                JOIN student_course_registrations scr ON c.course_id = scr.course_id</span>
<span class="s1">                WHERE scr.student_id = ?</span>
<span class="s1">                ORDER BY c.course_name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_id</span><span class="p">,))</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.get_course_students">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.get_course_students">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_course_students</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">course_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all students enrolled in a specific course.</span>
<span class="sd">        </span>
<span class="sd">        :param course_id: The ID of the course</span>
<span class="sd">        :type course_id: str</span>
<span class="sd">        :return: List of tuples containing (student_id, name)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT s.student_id, s.name</span>
<span class="s1">                FROM students s</span>
<span class="s1">                JOIN student_course_registrations scr ON s.student_id = scr.student_id</span>
<span class="s1">                WHERE scr.course_id = ?</span>
<span class="s1">                ORDER BY s.name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">course_id</span><span class="p">,))</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.get_instructor_courses">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.get_instructor_courses">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_instructor_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all courses assigned to a specific instructor.</span>
<span class="sd">        </span>
<span class="sd">        :param instructor_id: The ID of the instructor</span>
<span class="sd">        :type instructor_id: str</span>
<span class="sd">        :return: List of tuples containing (course_id, course_name)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT course_id, course_name</span>
<span class="s1">                FROM courses</span>
<span class="s1">                WHERE instructor_id = ?</span>
<span class="s1">                ORDER BY course_name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor_id</span><span class="p">,))</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.update_student">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.update_student">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update student information in the database.</span>
<span class="sd">        </span>
<span class="sd">        Updates only the specified fields, leaving others unchanged.</span>
<span class="sd">        Automatically updates the updated_at timestamp.</span>
<span class="sd">        </span>
<span class="sd">        :param student_id: The ID of the student to update</span>
<span class="sd">        :type student_id: str</span>
<span class="sd">        :param name: New name for the student, defaults to None</span>
<span class="sd">        :type name: str, optional</span>
<span class="sd">        :param age: New age for the student, defaults to None</span>
<span class="sd">        :type age: int, optional</span>
<span class="sd">        :param email: New email for the student, defaults to None</span>
<span class="sd">        :type email: str, optional</span>
<span class="sd">        :return: True if update was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                
                <span class="n">updates</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
                
                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;name = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">age</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;age = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">email</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;email = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">updates</span><span class="p">:</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">student_id</span><span class="p">)</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        UPDATE students SET </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span><span class="si">}</span>
<span class="s1">                        WHERE student_id = ?</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error updating student: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error updating student: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.update_instructor">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.update_instructor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update instructor information in the database.</span>
<span class="sd">        </span>
<span class="sd">        Updates only the specified fields, leaving others unchanged.</span>
<span class="sd">        Automatically updates the updated_at timestamp.</span>
<span class="sd">        </span>
<span class="sd">        :param instructor_id: The ID of the instructor to update</span>
<span class="sd">        :type instructor_id: str</span>
<span class="sd">        :param name: New name for the instructor, defaults to None</span>
<span class="sd">        :type name: str, optional</span>
<span class="sd">        :param age: New age for the instructor, defaults to None</span>
<span class="sd">        :type age: int, optional</span>
<span class="sd">        :param email: New email for the instructor, defaults to None</span>
<span class="sd">        :type email: str, optional</span>
<span class="sd">        :return: True if update was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                
                <span class="n">updates</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
                
                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;name = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">age</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;age = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">email</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;email = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">updates</span><span class="p">:</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instructor_id</span><span class="p">)</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        UPDATE instructors SET </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span><span class="si">}</span>
<span class="s1">                        WHERE instructor_id = ?</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error updating instructor: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error updating instructor: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.update_course">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.update_course">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_course</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">course_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">course_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update course information in the database.</span>
<span class="sd">        </span>
<span class="sd">        Updates only the specified fields, leaving others unchanged.</span>
<span class="sd">        Automatically updates the updated_at timestamp.</span>
<span class="sd">        </span>
<span class="sd">        :param course_id: The ID of the course to update</span>
<span class="sd">        :type course_id: str</span>
<span class="sd">        :param course_name: New name for the course, defaults to None</span>
<span class="sd">        :type course_name: str, optional</span>
<span class="sd">        :param instructor_id: New instructor ID for the course, defaults to None</span>
<span class="sd">        :type instructor_id: str, optional</span>
<span class="sd">        :return: True if update was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                
                <span class="n">updates</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
                
                <span class="k">if</span> <span class="n">course_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;course_name = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">course_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">instructor_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;instructor_id = ?&quot;</span><span class="p">)</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instructor_id</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">updates</span><span class="p">:</span>
                    <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        UPDATE courses SET </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span><span class="si">}</span>
<span class="s1">                        WHERE course_id = ?</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error updating course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error updating course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.delete_student">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.delete_student">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a student from the database.</span>
<span class="sd">        </span>
<span class="sd">        Removes the student record and all associated course registrations</span>
<span class="sd">        due to CASCADE constraints.</span>
<span class="sd">        </span>
<span class="sd">        :param student_id: The ID of the student to delete</span>
<span class="sd">        :type student_id: str</span>
<span class="sd">        :return: True if deletion was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM students WHERE student_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_id</span><span class="p">,))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error deleting student: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.delete_instructor">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.delete_instructor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete an instructor from the database.</span>
<span class="sd">        </span>
<span class="sd">        Removes the instructor record and sets instructor_id to NULL</span>
<span class="sd">        in associated courses due to SET NULL constraint.</span>
<span class="sd">        </span>
<span class="sd">        :param instructor_id: The ID of the instructor to delete</span>
<span class="sd">        :type instructor_id: str</span>
<span class="sd">        :return: True if deletion was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM instructors WHERE instructor_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor_id</span><span class="p">,))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error deleting instructor: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.delete_course">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.delete_course">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_course</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">course_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a course from the database.</span>
<span class="sd">        </span>
<span class="sd">        Removes the course record and all associated student registrations</span>
<span class="sd">        due to CASCADE constraints.</span>
<span class="sd">        </span>
<span class="sd">        :param course_id: The ID of the course to delete</span>
<span class="sd">        :type course_id: str</span>
<span class="sd">        :return: True if deletion was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM courses WHERE course_id = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">course_id</span><span class="p">,))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error deleting course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.unregister_student_from_course">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.unregister_student_from_course">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">unregister_student_from_course</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">course_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unregister a student from a specific course.</span>
<span class="sd">        </span>
<span class="sd">        Removes the registration record linking the student to the course.</span>
<span class="sd">        </span>
<span class="sd">        :param student_id: The ID of the student to unregister</span>
<span class="sd">        :type student_id: str</span>
<span class="sd">        :param course_id: The ID of the course to unregister from</span>
<span class="sd">        :type course_id: str</span>
<span class="sd">        :return: True if unregistration was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                    DELETE FROM student_course_registrations </span>
<span class="s1">                    WHERE student_id = ? AND course_id = ?</span>
<span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error unregistering student from course: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.search_students">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.search_students">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">search_students</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_term</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Search for students by name, ID, or email.</span>
<span class="sd">        </span>
<span class="sd">        Performs case-insensitive partial matching across all searchable fields.</span>
<span class="sd">        </span>
<span class="sd">        :param search_term: The term to search for</span>
<span class="sd">        :type search_term: str</span>
<span class="sd">        :return: List of tuples containing (student_id, name, age, email)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">search_pattern</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;%</span><span class="si">{</span><span class="n">search_term</span><span class="si">}</span><span class="s2">%&quot;</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT student_id, name, age, email</span>
<span class="s1">                FROM students</span>
<span class="s1">                WHERE name LIKE ? OR student_id LIKE ? OR email LIKE ?</span>
<span class="s1">                ORDER BY name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">search_pattern</span><span class="p">,</span> <span class="n">search_pattern</span><span class="p">,</span> <span class="n">search_pattern</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.search_instructors">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.search_instructors">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">search_instructors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_term</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Search for instructors by name, ID, or email.</span>
<span class="sd">        </span>
<span class="sd">        Performs case-insensitive partial matching across all searchable fields.</span>
<span class="sd">        </span>
<span class="sd">        :param search_term: The term to search for</span>
<span class="sd">        :type search_term: str</span>
<span class="sd">        :return: List of tuples containing (instructor_id, name, age, email)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">search_pattern</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;%</span><span class="si">{</span><span class="n">search_term</span><span class="si">}</span><span class="s2">%&quot;</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT instructor_id, name, age, email</span>
<span class="s1">                FROM instructors</span>
<span class="s1">                WHERE name LIKE ? OR instructor_id LIKE ? OR email LIKE ?</span>
<span class="s1">                ORDER BY name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">search_pattern</span><span class="p">,</span> <span class="n">search_pattern</span><span class="p">,</span> <span class="n">search_pattern</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.search_courses">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.search_courses">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">search_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_term</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Search for courses by name or ID.</span>
<span class="sd">        </span>
<span class="sd">        Performs case-insensitive partial matching and includes instructor information.</span>
<span class="sd">        </span>
<span class="sd">        :param search_term: The term to search for</span>
<span class="sd">        :type search_term: str</span>
<span class="sd">        :return: List of tuples containing (course_id, course_name, instructor_id, instructor_name)</span>
<span class="sd">        :rtype: List[Tuple]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">search_pattern</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;%</span><span class="si">{</span><span class="n">search_term</span><span class="si">}</span><span class="s2">%&quot;</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT c.course_id, c.course_name, i.instructor_id, i.name as instructor_name</span>
<span class="s1">                FROM courses c</span>
<span class="s1">                LEFT JOIN instructors i ON c.instructor_id = i.instructor_id</span>
<span class="s1">                WHERE c.course_name LIKE ? OR c.course_id LIKE ?</span>
<span class="s1">                ORDER BY c.course_name</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">search_pattern</span><span class="p">,</span> <span class="n">search_pattern</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="DatabaseManager.load_system_from_db">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.load_system_from_db">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_system_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SchoolManagementSystem</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load all data from database into a SchoolManagementSystem object.</span>
<span class="sd">        </span>
<span class="sd">        Reconstructs the complete object hierarchy with all relationships</span>
<span class="sd">        between students, instructors, and courses properly established.</span>
<span class="sd">        </span>
<span class="sd">        :return: A fully populated SchoolManagementSystem object</span>
<span class="sd">        :rtype: SchoolManagementSystem</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">system</span> <span class="o">=</span> <span class="n">SchoolManagementSystem</span><span class="p">()</span>
        
        <span class="n">instructors_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_instructors</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instructor_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">instructors_data</span><span class="p">:</span>
            <span class="n">instructor</span> <span class="o">=</span> <span class="n">Instructor</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">)</span>
            <span class="n">system</span><span class="o">.</span><span class="n">add_instructor</span><span class="p">(</span><span class="n">instructor</span><span class="p">)</span>
        
        <span class="n">courses_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_courses</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">,</span> <span class="n">instructor_name</span> <span class="ow">in</span> <span class="n">courses_data</span><span class="p">:</span>
            <span class="n">instructor</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">find_instructor_by_id</span><span class="p">(</span><span class="n">instructor_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">instructor_id</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">course</span> <span class="o">=</span> <span class="n">Course</span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">,</span> <span class="n">instructor</span><span class="p">)</span>
            <span class="n">system</span><span class="o">.</span><span class="n">add_course</span><span class="p">(</span><span class="n">course</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">instructor</span><span class="p">:</span>
                <span class="n">instructor</span><span class="o">.</span><span class="n">assign_course</span><span class="p">(</span><span class="n">course</span><span class="p">)</span>
        
        <span class="n">students_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_students</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">student_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">students_data</span><span class="p">:</span>
            <span class="n">student</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span><span class="p">)</span>
            <span class="n">system</span><span class="o">.</span><span class="n">add_student</span><span class="p">(</span><span class="n">student</span><span class="p">)</span>
            
            <span class="n">student_courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_student_courses</span><span class="p">(</span><span class="n">student_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span> <span class="ow">in</span> <span class="n">student_courses</span><span class="p">:</span>
                <span class="n">course</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">find_course_by_id</span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">course</span><span class="p">:</span>
                    <span class="n">student</span><span class="o">.</span><span class="n">register_course</span><span class="p">(</span><span class="n">course</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">system</span></div>

    
<div class="viewcode-block" id="DatabaseManager.sync_system_to_db">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.sync_system_to_db">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sync_system_to_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system</span><span class="p">:</span> <span class="n">SchoolManagementSystem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Synchronize a SchoolManagementSystem object to the database.</span>
<span class="sd">        </span>
<span class="sd">        Completely replaces all database contents with the data from the</span>
<span class="sd">        provided system object. This operation is destructive and irreversible.</span>
<span class="sd">        </span>
<span class="sd">        :param system: The system object to synchronize to the database</span>
<span class="sd">        :type system: SchoolManagementSystem</span>
<span class="sd">        :return: True if synchronization was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM student_course_registrations&quot;</span><span class="p">)</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM courses&quot;</span><span class="p">)</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM instructors&quot;</span><span class="p">)</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM students&quot;</span><span class="p">)</span>
                
                <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">system</span><span class="o">.</span><span class="n">students</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        INSERT INTO students (student_id, name, age, email)</span>
<span class="s1">                        VALUES (?, ?, ?, ?)</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">student_id</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">get_email</span><span class="p">()))</span>
                
                <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">system</span><span class="o">.</span><span class="n">instructors</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        INSERT INTO instructors (instructor_id, name, age, email)</span>
<span class="s1">                        VALUES (?, ?, ?, ?)</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor</span><span class="o">.</span><span class="n">instructor_id</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">get_email</span><span class="p">()))</span>
                
                <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">system</span><span class="o">.</span><span class="n">courses</span><span class="p">:</span>
                    <span class="n">instructor_id</span> <span class="o">=</span> <span class="n">course</span><span class="o">.</span><span class="n">instructor</span><span class="o">.</span><span class="n">instructor_id</span> <span class="k">if</span> <span class="n">course</span><span class="o">.</span><span class="n">instructor</span> <span class="k">else</span> <span class="kc">None</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        INSERT INTO courses (course_id, course_name, instructor_id)</span>
<span class="s1">                        VALUES (?, ?, ?)</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">course</span><span class="o">.</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course</span><span class="o">.</span><span class="n">course_name</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">))</span>
                
                <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">system</span><span class="o">.</span><span class="n">students</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">student</span><span class="o">.</span><span class="n">registered_courses</span><span class="p">:</span>
                        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                            INSERT INTO student_course_registrations (student_id, course_id)</span>
<span class="s1">                            VALUES (?, ?)</span>
<span class="s1">                        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">student_id</span><span class="p">,</span> <span class="n">course</span><span class="o">.</span><span class="n">course_id</span><span class="p">))</span>
                
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error syncing system to database: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.backup_database">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.backup_database">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">backup_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backup_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a backup copy of the database file.</span>
<span class="sd">        </span>
<span class="sd">        Creates a timestamped backup copy of the database file for data recovery purposes.</span>
<span class="sd">        </span>
<span class="sd">        :param backup_path: Path for the backup file, defaults to auto-generated timestamped name</span>
<span class="sd">        :type backup_path: str, optional</span>
<span class="sd">        :return: True if backup was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">backup_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>
                <span class="n">backup_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;school_management_backup_</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">.db&quot;</span>
            
            <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">,</span> <span class="n">backup_path</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database backed up to: </span><span class="si">{</span><span class="n">backup_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error backing up database: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="DatabaseManager.get_database_statistics">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.get_database_statistics">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_database_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate comprehensive database statistics.</span>
<span class="sd">        </span>
<span class="sd">        Provides overview statistics including record counts and popular courses.</span>
<span class="sd">        </span>
<span class="sd">        :return: Dictionary containing database statistics</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(*) FROM students&quot;</span><span class="p">)</span>
            <span class="n">student_count</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(*) FROM instructors&quot;</span><span class="p">)</span>
            <span class="n">instructor_count</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(*) FROM courses&quot;</span><span class="p">)</span>
            <span class="n">course_count</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(*) FROM student_course_registrations&quot;</span><span class="p">)</span>
            <span class="n">registration_count</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT c.course_name, COUNT(scr.student_id) as enrollment_count</span>
<span class="s1">                FROM courses c</span>
<span class="s1">                LEFT JOIN student_course_registrations scr ON c.course_id = scr.course_id</span>
<span class="s1">                GROUP BY c.course_id, c.course_name</span>
<span class="s1">                ORDER BY enrollment_count DESC</span>
<span class="s1">                LIMIT 5</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">)</span>
            <span class="n">popular_courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;total_students&#39;</span><span class="p">:</span> <span class="n">student_count</span><span class="p">,</span>
                <span class="s1">&#39;total_instructors&#39;</span><span class="p">:</span> <span class="n">instructor_count</span><span class="p">,</span>
                <span class="s1">&#39;total_courses&#39;</span><span class="p">:</span> <span class="n">course_count</span><span class="p">,</span>
                <span class="s1">&#39;total_registrations&#39;</span><span class="p">:</span> <span class="n">registration_count</span><span class="p">,</span>
                <span class="s1">&#39;popular_courses&#39;</span><span class="p">:</span> <span class="n">popular_courses</span>
            <span class="p">}</span></div>

    
<div class="viewcode-block" id="DatabaseManager.export_to_csv">
<a class="viewcode-back" href="../database_manager.html#database_manager.DatabaseManager.export_to_csv">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">export_to_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Export database table to CSV format.</span>
<span class="sd">        </span>
<span class="sd">        Exports the specified table or view to a CSV file with proper headers.</span>
<span class="sd">        Supports exporting students, instructors, courses, and registrations.</span>
<span class="sd">        </span>
<span class="sd">        :param table_name: Name of the table to export (&#39;students&#39;, &#39;instructors&#39;, &#39;courses&#39;, &#39;registrations&#39;)</span>
<span class="sd">        :type table_name: str</span>
<span class="sd">        :param output_path: Path to the output CSV file</span>
<span class="sd">        :type output_path: str</span>
<span class="sd">        :return: True if export was successful, False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span><span class="w"> </span><span class="nn">csv</span>
            <span class="k">with</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                
                <span class="k">if</span> <span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;students&#39;</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;instructors&#39;</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM instructors&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;courses&#39;</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        SELECT c.*, i.name as instructor_name</span>
<span class="s1">                        FROM courses c</span>
<span class="s1">                        LEFT JOIN instructors i ON c.instructor_id = i.instructor_id</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;registrations&#39;</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                        SELECT scr.*, s.name as student_name, c.course_name</span>
<span class="s1">                        FROM student_course_registrations scr</span>
<span class="s1">                        JOIN students s ON scr.student_id = s.student_id</span>
<span class="s1">                        JOIN courses c ON scr.course_id = c.course_id</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                
                <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
                <span class="n">column_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">description</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
                
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
                    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">column_names</span><span class="p">)</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error exporting to CSV: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, AbdelRahman ElKouche.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>